<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="loja.css">
    <script src="https://kit.fontawesome.com/3df637a2f2.js" crossorigin="anonymous"></script>
    <title>Loja - 2 Irmãos Carne Assada</title>
</head>
<body id="top">
    <header>
        <div class="content">
            <div class="logo">
                <img src="./img/logo-novo.png" alt="Logo Carne Assada 2 Irmãos">
                <h3 class="logo-titulo">2Irmãos 10 ANOS</h3>
            </div>
            <ul class="list-menu">
                <li><a href="#top"><i class="fas fa-home"></i> Inicio</a></li>
                <li><a href="#produtos"><i class="fas fa-drumstick-bite"></i> Produtos</a></li>
                <li><a href="#localizacao"><i class="fas fa-map-marker-alt"></i> Localização</a></li>
                <li><a href="#contatos"><i class="fas fa-phone"></i> Contatos</a></li>
            </ul>

            <div class="menu-toggle">
                <div class="one"></div>
                <div class="two"></div>
                <div class="three"></div>
            </div>
        </div>
        <!-- Overlay e menu mobile -->
        <div class="mobile-overlay" id="mobileOverlay"></div>
        <nav class="mobile-menu" id="mobileMenu">
            <div class="mobile-menu-logo">
                <img src="./img/logo-novo.png" alt="Logo Carne Assada 2 Irmãos">
                <h3 class="logo-titulo">2Irmãos 10 ANOS</h3>
            </div>
            <button class="close-mobile-menu" id="closeMobileMenu" aria-label="Fechar menu"><i class="fas fa-times"></i></button>
            <ul>
                <li><a href="#top"><i class="fas fa-home"></i> Inicio</a></li>
                <li><a href="#produtos"><i class="fas fa-drumstick-bite"></i> Produtos</a></li>
                <li><a href="#localizacao"><i class="fas fa-map-marker-alt"></i> Localização</a></li>
                <li><a href="#contatos"><i class="fas fa-phone"></i> Contatos</a></li>
            </ul>
        </nav>
    </header>

    <section class="store-hero">
        <div class="hero-content">
            <h1>Deixe seu dia mais gostoso!!!</h1>
            <h2>Churrasco mais saboroso da Região</h2>
            <button class="hero-btn" onclick="scrollToProducts()">
                <i class="fas fa-utensils"></i>
                Ver Cardápio
            </button>
        </div>
    </section>

    <section class="products-section" id="produtos">
        <div class="container">
            <h2>Nossos Produtos</h2>
            
            <div class="filters">
                <button class="filter-btn active" data-category="all">Todos</button>
                <button class="filter-btn" data-category="carnes">Carnes</button>
                <button class="filter-btn" data-category="frango">Frango</button>
                <button class="filter-btn" data-category="porco">Porco</button>
                <button class="filter-btn" data-category="acompanhamentos">Acompanhamentos</button>
            </div>

            <div class="products-grid" id="productsGrid">
                <!-- Produtos serão carregados dinamicamente -->
            </div>
        </div>
    </section>

    <section class="localizacao" id="localizacao">
        <h2>Nossa Localização</h2>
        <div class="map-container">
            <iframe 
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3622.9643336861204!2d-53.74373754490228!3d-24.762411988280746!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x94f3955eb1c71f13%3A0x5dbc3f2c1e715765!2sR.%20Carlos%20Sbaraini%2C%201918%20-%20S%C3%A3o%20Francisco%2C%20Toledo%20-%20PR%2C%2085911-200!5e0!3m2!1spt-BR!2sbr!4v1706525067918!5m2!1spt-BR!2sbr" 
                width="100%" 
                height="450" 
                style="border:0;" 
                allowfullscreen="" 
                loading="lazy" 
                referrerpolicy="no-referrer-when-downgrade">
            </iframe>
        </div>
        <div class="endereco-info">
            <h3>Endereço</h3>
            <p><i class="fas fa-map-marker-alt"></i> R. Carlos Sbaraini, 1918 - São Francisco, Toledo - PR, 85911-200</p>
        </div>
    </section>

    <section class="contatos" id="contatos">
        <h3>Contatos</h3>
        <div class="contatos-secao">
            <div>
                <a href="https://wa.me/5545999463821?text=%22Seja%20bem%20vindo%22%20ao%202Irm%C3%A3os%20carne%20assada%20Gostaria%20de%20fazer%20seu%20pedido%3F">
                   <i class="fas fa-phone"></i>
                   <span>(45) 99946-3821</span>
                </a>
            </div>

            <div>
               <a href="#">
                    <i class="fa fa-instagram"></i>
                    <span>@2Imãos</span>
               </a>
            </div>

           <div>
              <a href="#">
                  <i class="fab fa-facebook"></i>
                  <span>@2Imãos</span>
              </a>
           </div>
        </div>
    </section>

    <footer>
        <div class="footer-content">
            <h4>
                <a href="https://mail.google.com/mail/u/1/#inbox" target="_blank">
                    © 2024, Desenvolvido por -> charles 
                </a>
            </h4>
            <div class="admin-link">
                <a href="admin.html" title="Área Administrativa">
                    <i class="fas fa-cog"></i>
                    <span>Administração</span>
                </a>
            </div>
        </div>
    </footer>

    <!--button whatsapp-->
    <a href="https://wa.me/5545999463821?text=Quero%20fazer%20um%20pedido%20no%202Irm%C3%A3os%20Carne%20Assada!"
       class="btn-whatsapp"
       target="_blank"
       aria-label="Fale conosco no WhatsApp">
         <i class="fab fa-whatsapp"></i>
         <span class="tooltip">Fale conosco no WhatsApp!</span>
    </a>

    <!-- Firebase App (obrigatório) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <!-- Firestore -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyDfx8FHGHuEFoyijXtoolKuu1aZoLNiHZA",
        authDomain: "irmaos-carne-assada.firebaseapp.com",
        projectId: "irmaos-carne-assada",
        storageBucket: "irmaos-carne-assada.firebasestorage.app",
        messagingSenderId: "1065265268686",
        appId: "1:1065265268686:web:cf67858cffa14547b98d9f"
      };
      firebase.initializeApp(firebaseConfig);
      const db = firebase.firestore();
    </script>
    <script src="./script.js"></script>
    <script src="./loja.js"></script>
    
    <!-- Script de debug temporário -->
    <script>
        // Produtos de fallback caso o Firebase não funcione
        const fallbackProducts = [
            {
                name: "Contra Filé",
                price: 70.00,
                category: "carnes",
                image: "./img/t-bone.jpeg",
                description: "Contra filé grelhado na parrilha, suculento e saboroso"
            },
            {
                name: "Alcatra",
                price: 65.00,
                category: "carnes",
                image: "./img/contra-parrilha1.png",
                description: "Alcatra grelhada na parrilha, macia e deliciosa"
            },
            {
                name: "T-Bone",
                price: 70.00,
                category: "carnes",
                image: "./img/t-bone.jpeg",
                description: "T-Bone grelhado na parrilha, com osso característico"
            },
            {
                name: "Costela Bovina",
                price: 55.00,
                category: "carnes",
                image: "./img/costela1.png",
                description: "Costela bovina assada lentamente, desmancha na boca"
            },
            {
                name: "Frango Simples",
                price: 48.00,
                category: "frango",
                image: "./img/frango1.png",
                description: "Frango grelhado simples, sem recheio"
            },
            {
                name: "Frango Recheado com Farofa",
                price: 53.00,
                category: "frango",
                image: "./img/frango1.png",
                description: "Frango recheado com farofa especial"
            },
            {
                name: "Pato Recheado",
                price: 50.00,
                category: "frango",
                image: "./img/frango1.png",
                description: "Pato recheado, prato especial da casa"
            },
            {
                name: "Coxa Sobrecoxa",
                price: 8.00,
                category: "frango",
                image: "./img/linguiça.jpg",
                description: "Coxa sobrecoxa grelhada, unidade"
            },
            {
                name: "Porco Áparaguaia",
                price: 50.00,
                category: "porco",
                image: "./img/leitao1.png",
                description: "Porco áparaguaia, prato tradicional paraguaio"
            },
            {
                name: "Paleta Suína",
                price: 45.00,
                category: "porco",
                image: "./img/leitao1.png",
                description: "Paleta suína por kg, saborosa e versátil"
            },
            {
                name: "Costela Suína",
                price: 55.00,
                category: "porco",
                image: "./img/costela1.png",
                description: "Costela suína assada, saborosa e tradicional"
            },
            {
                name: "Farofa",
                price: 8.00,
                category: "acompanhamentos",
                image: "./img/sopa1.png",
                description: "Farofa tradicional da casa"
            },
            {
                name: "Arroz",
                price: 8.00,
                category: "acompanhamentos",
                image: "./img/sopa1.png",
                description: "Arroz branco soltinho"
            },
            {
                name: "Mandioca com Bacon",
                price: 10.00,
                category: "acompanhamentos",
                image: "./img/sopa1.png",
                description: "Mandioca frita com bacon crocante"
            },
            {
                name: "Pão de Alho",
                price: 4.00,
                category: "acompanhamentos",
                image: "./img/sopa1.png",
                description: "Pão de alho grelhado, unidade"
            },
            {
                name: "Abacaxi Assado",
                price: 20.00,
                category: "acompanhamentos",
                image: "./img/abacaxi.jpg",
                description: "Abacaxi assado na brasa, unidade"
            }
        ];

        // Função para renderizar produtos (usada tanto pelo Firebase quanto pelo fallback)
        function renderProductsFromArray(productsArray) {
            const productsGrid = document.getElementById('productsGrid');
            if (!productsGrid) {
                console.error('Elemento productsGrid não encontrado');
                return;
            }
            
            productsGrid.innerHTML = '';

            if (productsArray.length === 0) {
                productsGrid.innerHTML = '<div class="no-products">Nenhum produto encontrado</div>';
                return;
            }

            productsArray.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.innerHTML = `
                    <img src="${product.image}" alt="${product.name}" class="product-image" onerror="this.src='./img/logo-novo.png'">
                    <div class="product-info">
                        <div class="product-category">${getCategoryName(product.category)}</div>
                        <h3 class="product-name">${product.name}</h3>
                        <div class="product-price">R$ ${product.price.toFixed(2).replace('.', ',')}</div>
                        <p class="product-description">${product.description}</p>
                        <a href="https://wa.me/5545999463821?text=Olá! Gostaria de pedir ${product.name} por R$ ${product.price.toFixed(2).replace('.', ',')}" 
                           class="order-btn" target="_blank">
                            Pedir Agora
                        </a>
                    </div>
                `;
                productsGrid.appendChild(productCard);
            });
        }

        function getCategoryName(category) {
            const categories = {
                'carnes': 'Carnes',
                'frango': 'Frango',
                'porco': 'Porco',
                'acompanhamentos': 'Acompanhamentos'
            };
            return categories[category] || category;
        }

        // Função para filtrar produtos
        function filterProducts(category) {
            console.log('Filtrando por categoria:', category);
            const currentProducts = window.currentProducts || fallbackProducts;
            const filteredProducts = category === 'all' 
                ? currentProducts 
                : currentProducts.filter(product => product.category === category);
            renderProductsFromArray(filteredProducts);
        }

        // Função para configurar os botões de filtro
        function setupFilterButtons() {
            const filterButtons = document.querySelectorAll('.filter-btn');
            filterButtons.forEach(button => {
                button.onclick = function() {
                    // Remover classe active de todos os botões
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    // Adicionar classe active ao botão clicado
                    this.classList.add('active');
                    const category = this.getAttribute('data-category');
                    filterProducts(category);
                };
            });
        }

        // Verificar se há produtos no Firestore após 3 segundos
        setTimeout(() => {
            console.log('=== DEBUG: Verificando produtos no Firestore ===');
            if (typeof db !== 'undefined') {
                db.collection("produtos").get().then(snapshot => {
                    console.log('Produtos no Firestore:', snapshot.size);
                    if (snapshot.size === 0) {
                        console.log('⚠️ NENHUM PRODUTO ENCONTRADO NO FIRESTORE!');
                        console.log('Usando produtos de fallback...');
                        window.currentProducts = fallbackProducts;
                        renderProductsFromArray(fallbackProducts);
                        setupFilterButtons();
                        
                        // Importar produtos automaticamente
                        fetch('./produtos-churrascaria.json')
                            .then(response => response.json())
                            .then(products => {
                                console.log('Produtos carregados do JSON:', products.length);
                                
                                // Adicionar cada produto ao Firestore
                                const promises = products.map(product => {
                                    return db.collection("produtos").add(product);
                                });
                                
                                Promise.all(promises).then(() => {
                                    console.log('✅ Produtos importados com sucesso!');
                                    alert('Produtos importados automaticamente! Recarregue a página.');
                                }).catch(error => {
                                    console.error('Erro ao importar produtos:', error);
                                });
                            })
                            .catch(error => {
                                console.error('Erro ao carregar JSON:', error);
                            });
                    } else {
                        const firestoreProducts = [];
                        snapshot.forEach(doc => {
                            firestoreProducts.push({ id: doc.id, ...doc.data() });
                        });
                        window.currentProducts = firestoreProducts;
                        renderProductsFromArray(firestoreProducts);
                        setupFilterButtons();
                    }
                }).catch(error => {
                    console.error('Erro ao verificar produtos:', error);
                    console.log('Usando produtos de fallback devido ao erro...');
                    window.currentProducts = fallbackProducts;
                    renderProductsFromArray(fallbackProducts);
                    setupFilterButtons();
                });
            } else {
                console.error('Firebase não está disponível!');
                console.log('Usando produtos de fallback...');
                window.currentProducts = fallbackProducts;
                renderProductsFromArray(fallbackProducts);
                setupFilterButtons();
            }
        }, 3000);
    </script>
</body>
</html> 